<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrendBot Dashboard</title>
    <!-- Tailwind via CDN for simplicity -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .neon-text { text-shadow: 0 0 10px rgba(52, 211, 153, 0.5); }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-8 flex justify-between items-center border-b border-gray-700 pb-4">
            <div>
                <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-blue-500 neon-text">
                    TrendBot HQ
                </h1>
                <p class="text-gray-400 text-sm mt-1">AI-Powered Solana Trend Hunter</p>
            </div>
            <div class="text-right">
                <div class="text-xs text-gray-500">Last Updated</div>
                <div class="font-mono text-green-400"><%= lastUpdated.toLocaleTimeString() %></div>
            </div>
        </header>

        <!-- Metrics Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Win Rate -->
            <div class="bg-gray-800 rounded-xl p-6 border border-gray-700 shadow-lg">
                <div class="text-gray-400 text-sm font-semibold uppercase tracking-wider">Win Rate (>2x)</div>
                <div class="mt-2 flex items-baseline">
                    <span class="text-4xl font-bold text-green-400"><%= metrics.winRate %>%</span>
                    <span class="ml-2 text-sm text-gray-400">of <%= metrics.totalCalls %> calls</span>
                </div>
            </div>

            <!-- Moons -->
            <div class="bg-gray-800 rounded-xl p-6 border border-gray-700 shadow-lg">
                <div class="text-gray-400 text-sm font-semibold uppercase tracking-wider">Moonshots</div>
                <div class="mt-2 flex items-baseline">
                    <span class="text-4xl font-bold text-yellow-400"><%= metrics.moonCount %></span>
                    <span class="ml-2 text-sm text-gray-400">Tokens > 2x</span>
                </div>
            </div>

            <!-- Active -->
            <div class="bg-gray-800 rounded-xl p-6 border border-gray-700 shadow-lg">
                <div class="text-gray-400 text-sm font-semibold uppercase tracking-wider">Total Scanned</div>
                <div class="mt-2">
                    <span class="text-4xl font-bold text-blue-400"><%= metrics.totalCalls %></span>
                </div>
            </div>
        </div>

        <!-- Top Performers -->
        <div class="mb-8">
            <h2 class="text-xl font-bold text-white mb-4 flex items-center">
                <span class="mr-2">üèÜ</span> Top Performers (ATH)
            </h2>
            <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg border border-gray-700">
                <table class="w-full text-left">
                    <thead class="bg-gray-700 text-gray-300">
                        <tr>
                            <th class="px-6 py-3">Token</th>
                            <th class="px-6 py-3">Alert MC</th>
                            <th class="px-6 py-3">ATH MC</th>
                            <th class="px-6 py-3">Multiplier</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-700">
                        <% metrics.topPerformers.forEach(token => { %>
                        <tr class="hover:bg-gray-750 transition-colors">
                            <td class="px-6 py-4 font-bold text-white"><%= token.symbol %></td>
                            <td class="px-6 py-4 text-gray-400">$<%= (token.alertMc / 1000).toFixed(1) %>k</td>
                            <td class="px-6 py-4 text-gray-400">$<%= (token.athMc / 1000).toFixed(1) %>k</td>
                            <td class="px-6 py-4 text-green-400 font-bold"><%= (token.athMc / (token.alertMc || 1)).toFixed(1) %>x</td>
                        </tr>
                        <% }); %>
                        <% if(metrics.topPerformers.length === 0) { %>
                        <tr><td colspan="4" class="px-6 py-4 text-center text-gray-500">No data yet.</td></tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Recent Calls -->
        <div>
            <h2 class="text-xl font-bold text-white mb-4 flex items-center">
                <span class="mr-2">üì¢</span> Recent Calls
            </h2>
            <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg border border-gray-700">
                <table class="w-full text-left">
                    <thead class="bg-gray-700 text-gray-300">
                        <tr>
                            <th class="px-6 py-3">Time</th>
                            <th class="px-6 py-3">Token</th>
                            <th class="px-6 py-3">Status</th>
                            <th class="px-6 py-3">Current MC</th>
                            <th class="px-6 py-3">ATH X</th>
                            <th class="px-6 py-3">Link</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-700">
                        <% metrics.recentCalls.forEach(token => { %>
                        <tr class="hover:bg-gray-750 transition-colors">
                            <td class="px-6 py-4 text-gray-400 text-sm"><%= new Date(token.alertTimestamp).toLocaleString() %></td>
                            <td class="px-6 py-4 text-white"><%= token.symbol %></td>
                            <td class="px-6 py-4">
                                <% if(token.status === 'MOONED') { %>
                                    <span class="px-2 py-1 rounded bg-green-900 text-green-300 text-xs font-bold">MOONED üöÄ</span>
                                <% } else if(token.status === 'RUGGED') { %>
                                    <span class="px-2 py-1 rounded bg-red-900 text-red-300 text-xs font-bold">RUGGED üíÄ</span>
                                <% } else { %>
                                    <span class="px-2 py-1 rounded bg-blue-900 text-blue-300 text-xs font-bold">TRACKING üëÄ</span>
                                <% } %>
                            </td>
                            <td class="px-6 py-4 text-gray-400">$<%= (token.currentMc / 1000).toFixed(1) %>k</td>
                            <td class="px-6 py-4 text-green-400 font-bold"><%= (token.athMc / (token.alertMc || 1)).toFixed(1) %>x</td>
                            <td class="px-6 py-4">
                                <a href="https://dexscreener.com/solana/<%= token.mint %>" target="_blank" class="text-blue-400 hover:text-blue-300">Chart ‚Üó</a>
                            </td>
                        </tr>
                        <% }); %>
                        <% if(metrics.recentCalls.length === 0) { %>
                        <tr><td colspan="6" class="px-6 py-4 text-center text-gray-500">No recent calls.</td></tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
